var Ue=Object.defineProperty,_e=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var U=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))ue.call(t,n)&&U(e,n,t[n]);if(R)for(var n of R(t))ae.call(t,n)&&U(e,n,t[n]);return e},k=(e,t)=>_e(e,Ke(t));var x=(e,t)=>{var n={};for(var s in e)ue.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&R)for(var s of R(e))t.indexOf(s)<0&&ae.call(e,s)&&(n[s]=e[s]);return n};var ce=(e,t,n)=>(U(e,typeof t!="symbol"?t+"":t,n),n);import{n as f,B as F,j as i,a as r,D as de,T as me,S as H,r as d,R as w,u as Y,l as Qe,b as T,c as C,d as J,P as ze,L as _,e as he,f as pe,C as G,I as b,F as K,M as v,g as W,h as Q,i as P,k as Ve,m as E,o as z,p as ge,q as B,N as fe,s as qe,t as He,v as Ye,w as Je,x as Ge,Q as We,y as Xe,z as Ze,A as et}from"./vendor.9aa6ee6b.js";const tt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const a of u.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerpolicy&&(u.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?u.credentials="include":o.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}};tt();const S=f.div`
display: flex;
align-items: center;
justify-content: ${e=>e.between?"space-between":void 0};
> * {
  margin-top: 0 !important;
  margin-bottom: ${e=>typeof e.marginBottom=="number"?e.marginBottom+"rem":0} ;
  margin-right: ${e=>typeof e.gap=="number"?e.gap+"rem":e.gap?"2rem":"0"}
}`,Ee=f.div`
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;

`,nt=()=>r(Ee,{children:r(H,{size:"large"})}),ye=({error:e})=>i(Ee,{children:[r(M,{error:e}),r(de,{})]}),be=f(F)`
  padding: 0px;
`,rt=e=>e==null?void 0:e.message,M=function({error:e}){return rt(e)?r(me.Text,{type:"danger",children:e.message}):null},st=f.div`
  padding: 3.2rem;
  width: 100%;
  display: flex;
  flex-direction: column; 
`,X="__auth_provider_token__",ot=()=>window.localStorage.getItem(X),Fe=({user:e})=>(window.localStorage.setItem(X,e.token||""),e),ve="http://localhost:3001",ut=e=>fetch(`${ve}/login`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(async t=>t.ok?Fe(await t.json()):Promise.reject(await t.json())),at=e=>fetch(`${ve}/register`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(async t=>t.ok?Fe(await t.json()):Promise.reject(await t.json())),Ie=async()=>{window.localStorage.removeItem(X)},ct=e=>e==null||e==="",Z=e=>{const t=p({},e);return Object.keys(t).forEach(n=>{const s=t[n];ct(s)&&delete t[n]}),t},it=e=>{d.exports.useEffect(()=>{e()},[])};function ke(e,t){const[n,s]=d.exports.useState(e);return d.exports.useEffect(()=>{const o=setTimeout(()=>s(e),t);return()=>{clearTimeout(o)}},[e,t]),n}function Ce(e,t=!0){const n=d.exports.useRef(document.title).current;d.exports.useEffect(()=>{document.title=e},[e]),d.exports.useEffect(()=>()=>{document.title=n},[n,t])}const lt=()=>{const e=d.exports.useRef(!1);return d.exports.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e},dt=(e,t)=>{const n=Object.entries(e).filter(([s])=>t.includes(s));return Object.fromEntries(n)},mt={error:null,data:null,stat:"idle"},ht=e=>{const t=lt();return d.exports.useCallback((...n)=>t.current?e(...n):void 0,[t,e])},$=e=>{const[t,n]=d.exports.useReducer((m,l)=>p(p({},m),l),p(p({},mt),e)),[s,o]=d.exports.useState(()=>()=>{}),u=ht(n),a=d.exports.useCallback(m=>{u({error:null,data:m,stat:"success"})},[u]),c=d.exports.useCallback(m=>{u({error:m,stat:"error",data:null})},[u]),g=d.exports.useCallback((m,l)=>{if(!m||!m.then)throw new Error("\u8BF7\u4F20\u5165 Promise \u7C7B\u578B\u6570\u636E ");return o(()=>()=>{l!=null&&l.retry&&g(l==null?void 0:l.retry(),l)}),u({stat:"loading",data:null,error:null}),m.then(h=>(a(h),h)).catch(h=>(c(h),Promise.reject(h)))},[a,c,u]);return p({isIdle:t.stat==="idle",isLoading:t.stat==="loading",isError:t.stat==="error",isSuccess:t.stat==="success",run:g,setData:a,setError:c,retry:s},t)},pt=async()=>{let e=null;const t=ot();return t&&(e=(await xe("me",{token:t})).user),e},ee=w.createContext(void 0);ee.displayName="AuthContext";const gt=({children:e})=>{const t=Y(),{isLoading:n,isError:s,run:o,isIdle:u,data:a,setData:c,error:g}=$();if(it(()=>{o(pt())}),u||n)return r(nt,{});if(s)return r(ye,{error:g});const m=I=>ut(I).then(j=>{c(j)}),l=I=>at(I).then(j=>c(j)),h=()=>Ie().then(()=>{c(null),t.clear()});return r(ee.Provider,{value:{user:a,login:m,register:l,logout:h},children:e})},L=()=>{const e=w.useContext(ee);if(!e)throw new Error("useAuth\u5FC5\u987B\u518DAuthProvider \u4E2D\u4F7F\u7528");return e},ft="http://localhost:3001",xe=async(e,u={})=>{var a=u,{data:t,token:n,headers:s}=a,o=x(a,["data","token","headers"]);const c=p({method:"GET",headers:{Authorization:n?`Bearer ${n}`:"","Content-Type":"application/json"}},o);return c.method.toUpperCase()==="GET"?e+=`?${Qe.stringify(t)}`:c.body=JSON.stringify(t||{}),window.fetch(`${ft}/${e}`,c).then(async g=>{if(g.status===401)return await Ie(),window.location.reload(),Promise.reject({message:"\u8BF7\u91CD\u65B0\u767B\u5F55"});const m=await g.json();return g!=null&&g.ok?m:Promise.reject(m)})},y=()=>{const{user:e}=L();return(...[t,n])=>xe(t,k(p({},n),{token:e==null?void 0:e.token}))},te=(e,t)=>{const n=Y();return{onSuccess:()=>n.invalidateQueries(e),async onMutate(s){const o=n.getQueryData(e);return n.setQueryData(e,u=>t(s,u)),{previousItems:o}},onError(s,o,u){n.setQueryData(e,u.previousItems)}}},ne=e=>te(e,(t,n)=>(n==null?void 0:n.filter(s=>s.id!==t.id))||[]),Pe=e=>te(e,(t,n)=>(n==null?void 0:n.map(s=>s.id===t.id?p(p({},s),t):s))||[]),re=e=>te(e,(t,n)=>n?[...n,t]:[]),Be=e=>{const t=y();return T(["projects",Z(e)],()=>t("projects",{data:e}))},we=e=>{const t=y();return C(n=>t(`projects/${n.id}`,{method:"PATCH",data:n}),Pe(e))},Et=e=>{const t=y();return C(n=>t("projects",{data:n,method:"POST"}),re(e))},yt=e=>{const t=y();return C(({id:n})=>t(`projects/${n}`,{method:"DELETE"}),ne(e))},Ae=e=>{const t=y();return T(["project",{id:e}],()=>t(`projects/${e}`),{enabled:Boolean(e)})},A=e=>{const[t]=J(),n=se(),[s]=d.exports.useState(e);return[d.exports.useMemo(()=>dt(Object.fromEntries(t),s),[t,s]),o=>n(o)]},se=()=>{const[e,t]=J();return n=>{const s=Z(p(p({},Object.fromEntries(e)),n));return t(s)}},D=function(){const[{projectCreate:e},t]=A(["projectCreate"]),[{editingProjectId:n},s]=A(["editingProjectId"]);J();const{data:o,isLoading:u}=Ae(n),a=se(),c=()=>{t({projectCreate:!0})},g=()=>{a({projectCreate:"",editingProjectId:""})},m=l=>s({editingProjectId:l});return{projectModalOpen:e==="true"||Boolean(n),open:c,close:g,startEdit:m,editingProject:o,isLoading:u}},bt=()=>{const[e,t]=A(["name","personId"]);return[d.exports.useMemo(()=>k(p({},e),{personId:e.personId||void 0}),[e]),t]},V=()=>{const[e]=bt();return["projects",e]};function Ft(){const{data:e,isLoading:t}=Be(),n=e==null?void 0:e.filter(a=>a.pin),{open:s}=D(),o=function(){return i(u,{children:[r(me.Text,{type:"secondary",children:"\u6536\u85CF\u9879\u76EE"}),r(_,{children:n==null?void 0:n.map(a=>r(_.Item,{children:r(_.Item.Meta,{title:a.name})},a.id))}),r(he,{}),r(be,{type:"link",onClick:()=>s(),children:"\u521B\u5EFA\u9879\u76EE"})]})},u=f.div`
    min-width:15rem;
  `;return r(ze,{placement:"bottom",content:o,children:r("h2",{children:"\u9879\u76EE"})})}function vt(){return r("div",{children:"Epic"})}const It=e=>{const t=y();return T(["kanbans",e],()=>t("kanbans",{data:e}))},kt=e=>{const t=y();return Y(),C(n=>t("kanbans",{data:n,method:"POST"}),re(e))},Ct=e=>{const t=y();return C(({id:n})=>t(`kanbans/${n}`,{method:"DELETE"}),ne(e))},xt=e=>{const t=y();return C(n=>t("tasks",{data:n,method:"POST"}),re(e))},Te=e=>{const t=y(),n=k(p({},e),{name:ke(e==null?void 0:e.name,200)});return T(["tasks",n],()=>t("tasks",{data:n}))},Pt=e=>{const t=y();return T(["task",{id:e}],()=>t(`tasks/${e}`),{enabled:Boolean(e)})},Bt=e=>{const t=y();return C(n=>t(`tasks/${n.id}`,{data:n,method:"PATCH"}),Pe(e))},wt=e=>{const t=y();return C(({id:n})=>t(`tasks/${n}`,{method:"DELETE"}),ne(e))},je=()=>{const e=y();return T(["tasksType"],()=>e("taskTypes"))},N=()=>{var n;const{pathname:e}=pe(),t=(n=e.match(/projects\/(\d+)/))==null?void 0:n[1];return Number(t)},At=()=>Ae(N()),De=()=>({projectId:N()}),Se=()=>["kanbans",De()],O=()=>{const e=N(),[t,n]=A(["name","typeId","processorId","tagId"]);return d.exports.useMemo(()=>({projectId:e,typeId:Number(t.typeId)||void 0,processorId:Number(t.processorId)||void 0,tagId:Number(t.tagId)||void 0,name:t.name||void 0}),[e,t])},q=()=>["tasks",O()],Le=()=>{const[{editingTaskId:e},t]=A(["editingTaskId"]),{data:n,isLoading:s}=Pt(Number(e)),o=d.exports.useCallback(a=>{console.log("test"),t({editingTaskId:a})},[t]),u=d.exports.useCallback(()=>{t({editingTaskId:""})},[t]);return{editingTask:n,editingTaskId:e,startEdit:o,close:u,isLoading:s}};var Tt="/assets/task.e5ad6607.svg",jt="/assets/bug.5ca02341.svg";function Dt({kanbanId:e}){const[t,n]=d.exports.useState(""),{mutateAsync:s}=xt(q()),o=N(),[u,a]=d.exports.useState(!1),c=async()=>{await s({name:t,kanbanId:e,projectId:o}),n(""),a(!1)},g=()=>a(m=>!m);return d.exports.useEffect(()=>{u||n("")},[u]),u?r(G,{children:r(b,{onBlur:g,placeholder:"\u9700\u8981\u505A\u4E9B\u4EC0\u4E48",autoFocus:!0,onPressEnter:c,value:t,onChange:m=>n(m.target.value)})}):r("div",{onClick:g,children:"+\u521B\u5EFA\u4E8B\u52A1"})}const St=({name:e,keyword:t})=>{if(!t)return r(K,{children:e});const n=e.split(t);return r(K,{children:n.map((s,o)=>i("span",{children:[s,o===n.length-1?null:r("span",{style:{color:"#257AFD"},children:t})]},o))})},Lt=({id:e})=>{const{data:t}=je(),n=t==null?void 0:t.find(s=>s.id===e);return n!=null&&n.name?r("img",{alt:"task-icon",src:n.name==="task"?Tt:jt}):null},Nt=({task:e})=>{const{startEdit:t}=Le(),{name:n}=O();return i(G,{onClick:()=>{t(e.id)},style:{marginBottom:"0.5rem",cursor:"pointer "},children:[i("p",{children:[" ",r(St,{name:e.name,keyword:n||""})]}),r(Lt,{id:e.typeId})]},e.id)},Ot=({kanban:e})=>{const{data:t}=Te(O()),n=t==null?void 0:t.filter(s=>s.kanbanId===e.id);return i(Ne,{children:[i(S,{between:!0,children:[" ",r("h3",{children:e.name})," ",r(Rt,{kanban:e})]}),i(Mt,{children:[n==null?void 0:n.map(s=>r(Nt,{task:s})),r(Dt,{kanbanId:e.id})]})]})},Rt=({kanban:e})=>{const{mutateAsync:t}=Ct(Se()),n=()=>{Q.confirm({okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",title:"\u786E\u5B9A\u5220\u9664\u770B\u677F\u5417",onOk(){return t({id:e.id})}})},s=r(v,{children:r(v.Item,{children:r(F,{onClick:n,type:"link",children:"\u5220\u9664"})})});return r(W,{overlay:s,children:r(F,{type:"link",children:"..."})})},Ne=f.div`
  display: flex;
  flex-direction: column;
  border-radius: 7px;
  min-width: 27rem;
  background-color: rgb(244, 245, 247);
  padding: 0.7rem 0.7rem 1rem;
  /* border: 1px solid red */
  margin-right: 1.5rem;
`,Mt=f.div`
  overflow: scroll;
  flex: 1;
  ::-webkit-scrollbar {
    display: none;
  }
`,$t=()=>{const[e,t]=d.exports.useState(""),n=N(),{mutateAsync:s}=kt(Se());return r(Ne,{children:r(b,{size:"large",placeholder:"\u65B0\u5EFA\u770B\u677F\u540D\u79F0",onPressEnter:async()=>{await s({name:e,projectId:n}),t("")},value:e,onChange:u=>t(u.target.value)})})},Oe=e=>{const a=e,{value:t,onChange:n,defaultOptionName:s,options:o}=a,u=x(a,["value","onChange","defaultOptionName","options"]);return i(P,k(p({value:o!=null&&o.length?ie(t):0,onChange:c=>n==null?void 0:n(ie(c)||void 0)},u),{children:[s?r(P.Option,{value:0,children:s}):null,o==null?void 0:o.map(c=>r(P.Option,{value:c.id,children:c.name},c.id))]}))},ie=e=>isNaN(Number(e))?0:Number(e),Re=e=>{const{data:t}=je();return r(Oe,p({options:t||[]},e))},Me=function(e){const o=$(),{run:t}=o,n=x(o,["run"]),s=y();return d.exports.useEffect(()=>{t(s("users",{data:Z(e||{})}))},[e]),n},oe=e=>{const{data:t}=Me();return r(Oe,p({options:t||[]},e))},Ut=()=>{const e=O(),t=se(),n=()=>{t({typeId:void 0,processorId:void 0,tagId:void 0,name:void 0})};return i(S,{marginBottom:2,gap:!0,children:[r(b,{style:{width:"20rem"},placeholder:"\u9879\u76EE\u540D",value:e.name,onChange:s=>{t({name:s.target.value})}}),r(oe,{defaultOptionName:"\u7ECF\u529E\u4EBA",value:e.processorId,onChange:s=>{t({processorId:s})}}),r(Re,{defaultOptionName:"\u7C7B\u578B",value:e.typeId,onChange:s=>t({typeId:s})}),r(F,{onClick:()=>n(),children:"\u6E05\u9664\u7B5B\u9009\u5668"})]})},_t={labelCol:{span:8},wrapperCol:{span:16}};function Kt(){const[e]=Ve.useForm(),{editingTaskId:t,editingTask:n,close:s}=Le(),{mutateAsync:o,isLoading:u}=Bt(q()),a=()=>{s(),e.resetFields()},c=async()=>{await o(p(p({},n),e.getFieldsValue())),s()},{mutateAsync:g}=wt(q());d.exports.useEffect(()=>{e.setFieldsValue(n)},[e,n]);const m=()=>{s(),Q.confirm({title:"\u786E\u5B9A\u5220\u9664\u4EFB\u52A1\u5417",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:()=>g({id:Number(t)})})};return r(Q,{forceRender:!0,onCancel:a,onOk:c,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",confirmLoading:u,title:"\u7F16\u8F91\u4EFB\u52A1",visible:!!t,children:i(E,k(p({form:e},_t),{initialValues:n,children:[r(E.Item,{name:"name",label:"\u4EFB\u52A1\u540D",children:r(b,{})}),r(E.Item,{label:"\u7ECF\u529E\u4EBA",name:"processorId",children:r(oe,{defaultOptionName:"\u7ECF\u529E\u4EBA"})}),r(E.Item,{label:"\u7C7B\u578B",name:"typeId",children:r(Re,{})}),r("div",{style:{textAlign:"right"},children:r(F,{type:"link",onClick:m,children:"\u5220\u9664"})})]}))})}function Qt(){Ce("\u770B\u677F\u5217\u8868");const{data:e}=At(),{data:t,isLoading:n}=It(De()),{isLoading:s}=Te(O()),o=s||n;return i(st,{children:[i("h1",{children:[e==null?void 0:e.name,"\u770B\u677F"]}),r(Ut,{}),o?r(H,{size:"large"}):i(zt,{children:[t==null?void 0:t.map(u=>r(Ot,{kanban:u})),r($t,{})]}),r(Kt,{})]})}const zt=f.div`
  display: flex;
  /* overflow: scroll; */
  flex: 1;
  overflow-x: scroll;
`,Vt=()=>{const e=pe().pathname.split("/");return e[e.length-1]};function qt(){const e=Vt();return i(Jt,{children:[r(Ht,{children:i(v,{mode:"inline",selectedKeys:[e],children:[r(v.Item,{children:r(z,{to:"kanban",children:"\u770B\u677F"})},"kanban"),r(v.Item,{children:r(z,{to:"epic",children:"\u4EFB\u52A1\u7EC4"})},"epic")]})}),r(Yt,{children:i(ge,{children:[r(B,{path:"/kanban",element:r(Qt,{})}),r(B,{path:"/epic",element:r(vt,{})}),r(B,{path:"/*",element:r(fe,{to:"kanban",replace:!0})})]})})]})}const Ht=f.aside`
  background-color: rgb(244, 245, 247);
  display: flex;
`,Yt=f.div`
  box-shadow: -5px 0 5px -5px rgba(0,0,0, 0.1);
  display: flex;
  overflow: hidden;
`,Jt=f.div`
  display: grid;
  grid-template-columns: 16rem 1fr;
  /* height: 100vh; */
  grid-template-rows: 1fr ;
  overflow: hidden;
`,le=s=>{var o=s,{checked:e,onCheckedChange:t}=o,n=x(o,["checked","onCheckedChange"]);return r(qe,p({count:1,value:e?1:0,onChange:u=>t==null?void 0:t(!!u)},n))};function Gt(n){var s=n,{users:e}=s,t=x(s,["users"]);const{mutate:o}=we(V()),{startEdit:u}=D(),a=l=>h=>{o({id:l,pin:h})},{mutate:c}=yt(V()),g=l=>()=>u(l),m=l=>()=>c(String(l));return D(),r(He,k(p({},t),{columns:[{title:r(le,{checked:!0,disabled:!0}),render(l,h){return r(le,{checked:h.pin,onCheckedChange:a(h.id)})}},{title:"\u540D\u79F0",sorter:(l,h)=>l.name.localeCompare(h.name),render(l,h){return r(z,{to:String(h.id),children:h.name})}},{title:"\u90E8\u95E8",dataIndex:"organization"},{title:"\u521B\u5EFA\u65F6\u95F4",render(l,h){return r("span",{children:h.created?Ye(h.created).format("YYYY-MM-DD"):"\u65E0"})}},{title:"\u8D1F\u8D23\u4EBA",render(l,h){var I;return r("span",{children:((I=e.find(j=>j.id===h.personId))==null?void 0:I.name)||"\u672A\u77E5"})}},{render(l,h){return r(W,{overlay:i(v,{children:[r(v.Item,{onClick:g(h.id),children:"\u7F16\u8F91"},"edit"),r(v.Item,{onClick:m(h.id),children:"\u5220\u9664"},"delete")]}),children:r(be,{type:"link",children:"..."})})}}]}))}function Wt({param:e,setParam:t,users:n}){y();let[s,o]=d.exports.useState("");d.exports.useEffect(()=>{var a;n.length>0&&o((a=n.find(c=>c.id==e.personId))==null?void 0:a.name)},[n]);const u=d.exports.useMemo(()=>function(){return i(P,{labelInValue:!0,defaultValue:{value:s||"\u8D1F\u8D23\u4EBA",key:e.personId},onChange:a=>{t(k(p({},e),{personId:a.key}))},children:[r(P.Option,{value:"",children:"\u8D1F\u8D23\u4EBA"}),n.map(a=>r(P.Option,{value:a.name,children:a.name},a.id))]})},[s]);return i(Xt,{action:"",children:[r(Zt,{placeholder:"\u9879\u76EE\u540D\u79F0",type:"text",size:"middle",value:e.name,onChange:a=>t(k(p({},e),{name:a.target.value}))}),r(u,{})]})}const Xt=f(E)`
  // display: flex;
  // justify-content: space-between;
  // margin-left: 1vw;
  // margin-right: 1vw;
`,Zt=f(b)`
  width: 30vw;
  margin-right: 2vw; 
`;function en(){y(),Ce("\u9879\u76EE\u5217\u8868");const[e,t]=A(["name","personId"]),n=ke(e,200),{isLoading:s,error:o,data:u}=Be(n),{data:a}=Me(),{open:c}=D();return i(tn,{children:[i(S,{between:!0,children:[r("h1",{children:"\u9879\u76EE\u5217\u8868"}),r(F,{onClick:()=>{c()},children:"\u521B\u5EFA\u9879\u76EE"})]}),r(M,{error:o}),r(Wt,{param:e,setParam:t,users:a||[]}),r(Gt,{users:a||[],dataSource:u||void 0,loading:s})]})}const tn=f.div`
  padding:0 3rem 0 3rem;
  flex: 1
`,nn=()=>{const{projectModalOpen:e,close:t,editingProject:n,isLoading:s}=D(),o=n?we:Et,{mutateAsync:u,error:a,isLoading:c}=o(V()),[g]=E.useForm(),m=I=>{console.log("Received values of form: ",I),u(p(p({},n),I)).then(()=>{g.resetFields(),t()})},l=()=>{g.resetFields(),t()},h=n?"\u7F16\u8F91\u9879\u76EE":"\u521B\u5EFA\u9879\u76EE";return d.exports.useEffect(()=>{g.setFieldsValue(n)},[n,g]),r(Je,{forceRender:!0,onClose:l,visible:e,width:"100%",children:r(rn,{children:s?r(H,{size:"large"}):i(K,{children:[r("h1",{children:h}),r(M,{error:a}),i(E,{form:g,layout:"vertical",style:{width:"40rem"},onFinish:m,children:[r(E.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D"}],children:r(b,{placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"})}),r(E.Item,{label:"\u90E8\u95E8",name:"organization",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D"}],children:r(b,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D"})}),r(E.Item,{label:"\u8D1F\u8D23\u4EBA",name:"personId",children:r(oe,{defaultOptionName:"\u8D1F\u8D23\u4EBA"})}),r(E.Item,{style:{textAlign:"right"},children:r(F,{loading:c,type:"primary",htmlType:"submit",children:"\u63D0\u4EA4"})})]})]})})})},rn=f.div`
  height: 80vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`;function sn(){return r(Ge,{children:i(an,{children:[r(on,{}),r(mn,{children:i(ge,{children:[r(B,{path:"/projects",element:r(en,{})}),r(B,{path:"/projects/:projectId/*",element:r(qt,{})}),r(B,{path:"*",element:r(fe,{to:"projects"})})]})}),r(nn,{})]})})}const on=()=>i(cn,{between:!0,children:[i(ln,{gap:!0,children:[r(F,{type:"link",onClick:()=>{window.location.href=window.location.origin},children:"Logo"}),r(Ft,{}),r("h2",{children:"\u7528\u6237"})]}),r(dn,{children:r(un,{})})]}),un=()=>{const{logout:e,user:t}=L();return r(W,{overlay:r(v,{children:r(v.Item,{children:r(F,{type:"link",onClick:e,children:"\u9000\u51FA"})})}),children:i(F,{type:"link",onClick:n=>n.preventDefault(),children:["Hi, ",t==null?void 0:t.name]})})},an=f.div`
  display: grid;
  grid-template-rows: 6rem 1fr;
  height: 100vh;
`,cn=f(S)`
  padding: 0 3rem 0 3rem;
  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);
  z-index: 1;
`,ln=f(S)``,dn=f.div``,mn=f.main`
  display: flex;
  /* overflow: hidden; */
`;function hn({onError:e}){const{login:t,user:n}=L(),{run:s,isLoading:o}=$();return i(E,{onFinish:a=>{e(null),s(t(a).catch(e))},children:[r(E.Item,{name:"username",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],children:r(b,{placeholder:"\u7528\u6237\u540D",type:"text",id:"username"})}),r(E.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],children:r(b,{placeholder:"\u5BC6\u7801",id:"password"})}),r($e,{type:"primary",htmlType:"submit",loading:o,children:" \u767B\u5F55"})]})}function pn({onError:e}){const{run:t,isLoading:n}=$(),{register:s,user:o}=L();return i(E,{onFinish:g=>{var m=g,{cpassword:a}=m,c=x(m,["cpassword"]);if(e(null),a!==c.password){e(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"));return}t(s(c).catch(l=>{e(l)}))},children:[r(E.Item,{name:"username",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],children:r(b,{placeholder:"\u7528\u6237\u540D",type:"text",id:"username"})}),r(E.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}],children:r(b,{placeholder:"\u5BC6\u7801",id:"password"})}),r(E.Item,{name:"cpassword",rules:[{required:!0,message:"\u8BF7\u786E\u8BA4\u5BC6\u7801"}],children:r(b,{placeholder:"\u5BC6\u7801",id:"cpassword"})}),r($e,{type:"primary",htmlType:"submit",loading:n,children:" \u6CE8\u518C"})]})}function gn(){const[e,t]=w.useState(!1),[n,s]=w.useState(null);return r(En,{children:i(yn,{children:[r(fn,{children:e?"\u8BF7\u6CE8\u518C":"\u8BF7\u767B\u5F55"}),r(M,{error:n}),e?r(pn,{onError:s}):r(hn,{onError:s}),r(he,{}),r("a",{onClick:()=>{s(null),t(!e)},children:e?"\u5DF2\u7ECF\u6709\u8D26\u53F7\u4E86\uFF1F\u76F4\u63A5\u767B\u5F55":"\u6CA1\u6709\u8D26\u53F7?\u6CE8\u518C\u65B0\u8D26\u53F7 "})]})})}const fn=f.h1`
  margin-bottom : 2.4rem;
  color: rgb(94, 108, 132)
`,$e=f(F)`
  width: 100%;
  `,En=f.div`
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
min-height: 100vh;
`,yn=f(G)`
  width: 40rem;
  min-height: 56rem;
  padding:3.2rem 4rem;
  box-sizing: border-box;
  box-shadow: rgba(0,0,0,0,0.1) 0 0 10px;
  text-align: center;
`;class bn extends w.Component{constructor(){super(...arguments);ce(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t}}render(){const{error:t}=this.state,{fallbackRender:n,children:s}=this.props;return t?n({error:t}):s}}function Fn(){const{user:e}=L();return document.addEventListener("error",t=>{alert(t)}),r("div",{className:"App",children:r(bn,{fallbackRender:ye,children:e?r(sn,{}):r(gn,{})})})}function vn({children:e}){return r(We,{client:new Xe,children:r(gt,{children:e})})}Ze(()=>{et.render(r(w.StrictMode,{children:i(vn,{children:[r(de,{}),r(Fn,{})]})}),document.getElementById("root"))});
