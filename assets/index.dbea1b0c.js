var B=Object.defineProperty;var y=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var w=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&w(e,r,t[r]);if(y)for(var r of y(t))b.call(t,r)&&w(e,r,t[r]);return e};var A=(e,t)=>{var r={};for(var s in e)x.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&y)for(var s of y(e))t.indexOf(s)<0&&b.call(e,s)&&(r[s]=e[s]);return r};import{l as $,r as m,n as h,B as I,R as a,S as L,D as S,T as k,u as O,Q as U,a as C,b as F,c as D}from"./vendor.078d3364.js";const N=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};N();const P="__auth_provider_token__",M=()=>window.localStorage.getItem(P),_=({user:e})=>(window.localStorage.setItem(P,e.token||""),e),R="http://localhost:3001",Q=e=>fetch(`${R}/login`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(async t=>t.ok?_(await t.json()):Promise.reject(await t.json())),J=e=>fetch(`${R}/register`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(async t=>t.ok?_(await t.json()):Promise.reject(await t.json())),j=async()=>{window.localStorage.removeItem(P)},q="http://localhost:3001",z=async(e,o={})=>{var c=o,{data:t,token:r,headers:s}=c,n=A(c,["data","token","headers"]);const i=g({method:"GET",headers:{Authorization:r?`Bearer ${r}`:"","Content-Type":"application/json"}},n);return i.method.toUpperCase()==="GET"?e+=`?${$.stringify(t)}`:i.body=JSON.stringify(t||{}),window.fetch(`${q}/${e}`,i).then(async d=>{if(d.status===401)return await j(),window.location.reload(),Promise.reject({message:"\u8BF7\u91CD\u65B0\u767B\u5F55"});const l=await d.json();return d!=null&&d.ok?l:Promise.reject(l)})},G=e=>{m.exports.useEffect(()=>{e()},[])},K=()=>{const e=m.exports.useRef(!1);return m.exports.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e},H={error:null,data:null,stat:"idle"},V=e=>{const t=K();return m.exports.useCallback((...r)=>t.current?e(...r):void 0,[t,e])},W=e=>{const[t,r]=m.exports.useReducer((l,u)=>g(g({},l),u),g(g({},H),e)),[s,n]=m.exports.useState(()=>()=>{}),o=V(r),c=m.exports.useCallback(l=>{o({error:null,data:l,stat:"success"})},[o]),i=m.exports.useCallback(l=>{o({error:l,stat:"error",data:null})},[o]),d=m.exports.useCallback((l,u)=>{if(!l||!l.then)throw new Error("\u8BF7\u4F20\u5165 Promise \u7C7B\u578B\u6570\u636E ");return n(()=>()=>{u!=null&&u.retry&&d(u==null?void 0:u.retry(),u)}),o({stat:"loading",data:null,error:null}),l.then(f=>(c(f),f)).catch(f=>(i(f),Promise.reject(f)))},[c,i,o]);return g({isIdle:t.stat==="idle",isLoading:t.stat==="loading",isError:t.stat==="error",isSuccess:t.stat==="success",run:d,setData:c,setError:i,retry:s},t)};h.div`
display: flex;
align-items: center;
justify-content: ${e=>e.between?"space-between":void 0};
> * {
  margin-top: 0 !important;
  margin-bottom: ${e=>typeof e.marginBottom=="number"?e.marginBottom+"rem":0} ;
  margin-right: ${e=>typeof e.gap=="number"?e.gap+"rem":e.gap?"2rem":"0"}
}`;const v=h.div`
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;

`,X=()=>a.createElement(v,null,a.createElement(L,{size:"large"})),Y=({error:e})=>a.createElement(v,null,a.createElement(ee,{error:e}),a.createElement(S,null));h(I)`
  padding: 0px;
`;const Z=e=>e==null?void 0:e.message,ee=function({error:e}){return Z(e)?a.createElement(k.Text,{type:"danger"},e.message):null};h.div`
  padding: 3.2rem;
  width: 100%;
  display: flex;
  flex-direction: column; 
`;const te=async()=>{let e=null;const t=M();return t&&(e=(await z("me",{token:t})).user),e},T=a.createContext(void 0);T.displayName="AuthContext";const re=({children:e})=>{const t=O(),{isLoading:r,isError:s,run:n,isIdle:o,data:c,setData:i,error:d}=W();if(G(()=>{n(te())}),o||r)return a.createElement(X,null);if(s)return a.createElement(Y,{error:d});const l=p=>Q(p).then(E=>{i(E)}),u=p=>J(p).then(E=>i(E)),f=()=>j().then(()=>{i(null),t.clear()});return a.createElement(T.Provider,{value:{user:c,login:l,register:u,logout:f}},e)};function ne({children:e}){return a.createElement(U,{client:new C},a.createElement(re,null,e))}F(()=>{D.render(a.createElement(a.StrictMode,null,a.createElement(ne,null,a.createElement(S,null))),document.getElementById("root"))});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZGJlYTFiMGMuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3ZpdGUvbW9kdWxlcHJlbG9hZC1wb2x5ZmlsbCIsIi4uLy4uL3NyYy9hdXRoLXByb3ZpZGVyLnRzIiwiLi4vLi4vc3JjL3V0aWxzL2h0dHAudHMiLCIuLi8uLi9zcmMvdXRpbHMvaW5kZXgudHMiLCIuLi8uLi9zcmMvdXRpbHMvdXNlLWFzeW5jLnRzIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvbGliLnRzeCIsIi4uLy4uL3NyYy9jb250ZXh0L2F1dGgtY29udGV4dC50c3giLCIuLi8uLi9zcmMvY29udGV4dC9pbmRleC50c3giLCIuLi8uLi9zcmMvbWFpbi50c3giXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcCA9IGZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuICAgIGNvbnN0IHJlbExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJykucmVsTGlzdDtcbiAgICBpZiAocmVsTGlzdCAmJiByZWxMaXN0LnN1cHBvcnRzICYmIHJlbExpc3Quc3VwcG9ydHMoJ21vZHVsZXByZWxvYWQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgbGluayBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsaW5rW3JlbD1cIm1vZHVsZXByZWxvYWRcIl0nKSkge1xuICAgICAgICBwcm9jZXNzUHJlbG9hZChsaW5rKTtcbiAgICB9XG4gICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xuICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgIT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgbXV0YXRpb24uYWRkZWROb2Rlcykge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdMSU5LJyAmJiBub2RlLnJlbCA9PT0gJ21vZHVsZXByZWxvYWQnKVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzUHJlbG9hZChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pLm9ic2VydmUoZG9jdW1lbnQsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuICAgIGZ1bmN0aW9uIGdldEZldGNoT3B0cyhzY3JpcHQpIHtcbiAgICAgICAgY29uc3QgZmV0Y2hPcHRzID0ge307XG4gICAgICAgIGlmIChzY3JpcHQuaW50ZWdyaXR5KVxuICAgICAgICAgICAgZmV0Y2hPcHRzLmludGVncml0eSA9IHNjcmlwdC5pbnRlZ3JpdHk7XG4gICAgICAgIGlmIChzY3JpcHQucmVmZXJyZXJwb2xpY3kpXG4gICAgICAgICAgICBmZXRjaE9wdHMucmVmZXJyZXJQb2xpY3kgPSBzY3JpcHQucmVmZXJyZXJwb2xpY3k7XG4gICAgICAgIGlmIChzY3JpcHQuY3Jvc3NvcmlnaW4gPT09ICd1c2UtY3JlZGVudGlhbHMnKVxuICAgICAgICAgICAgZmV0Y2hPcHRzLmNyZWRlbnRpYWxzID0gJ2luY2x1ZGUnO1xuICAgICAgICBlbHNlIGlmIChzY3JpcHQuY3Jvc3NvcmlnaW4gPT09ICdhbm9ueW1vdXMnKVxuICAgICAgICAgICAgZmV0Y2hPcHRzLmNyZWRlbnRpYWxzID0gJ29taXQnO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBmZXRjaE9wdHMuY3JlZGVudGlhbHMgPSAnc2FtZS1vcmlnaW4nO1xuICAgICAgICByZXR1cm4gZmV0Y2hPcHRzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcm9jZXNzUHJlbG9hZChsaW5rKSB7XG4gICAgICAgIGlmIChsaW5rLmVwKVxuICAgICAgICAgICAgLy8gZXAgbWFya2VyID0gcHJvY2Vzc2VkXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxpbmsuZXAgPSB0cnVlO1xuICAgICAgICAvLyBwcmVwb3B1bGF0ZSB0aGUgbG9hZCByZWNvcmRcbiAgICAgICAgY29uc3QgZmV0Y2hPcHRzID0gZ2V0RmV0Y2hPcHRzKGxpbmspO1xuICAgICAgICBmZXRjaChsaW5rLmhyZWYsIGZldGNoT3B0cyk7XG4gICAgfVxufTtfX1ZJVEVfSVNfTU9ERVJOX18mJnAoKTsiLCIvL+WcqOecn+WunueOr+Wig+S4re+8jOWmguaenOS9v+eUqGZpcmViYXNl6L+Z56eN56ys5LiJ5pa5YXV0aOacjeWKoeeahOivne+8jOacrOaWh+S7tuS4jemcgOimgeW8gOWPkeiAheW8gOWPkVxuXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4vdHlwZXMvdXNlclwiO1xuXG5jb25zdCBsb2NhbFN0b3JhZ2VLZXkgPSAnX19hdXRoX3Byb3ZpZGVyX3Rva2VuX18nXG5cbmV4cG9ydCBjb25zdCBnZXRUb2tlbiA9ICgpID0+IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbFN0b3JhZ2VLZXkpXG5cbmV4cG9ydCBjb25zdCBoYW5kbGVVc2VyUmVzcG9uc2UgPSAoe3VzZXJ9OiB7dXNlcjogVXNlcn0pID0+e1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTdG9yYWdlS2V5LCB1c2VyLnRva2VuIHx8ICcnKVxuICByZXR1cm4gdXNlcjtcbn1cblxuXG5jb25zdCBhcGlVcmwgPSBwcm9jZXNzLmVudi5SRUFDVF9BUFBfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAxJ1xuZXhwb3J0IGNvbnN0IGxvZ2luID0gKGRhdGE6IHt1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nfSkgPT57XG4gIHJldHVybiBmZXRjaChgJHthcGlVcmx9L2xvZ2luYCwge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICB9KS50aGVuKGFzeW5jIChyZXNwb25zZTogUmVzcG9uc2UpID0+e1xuICAgIGlmKHJlc3BvbnNlLm9rKXtcbiAgICAgIHJldHVybiBoYW5kbGVVc2VyUmVzcG9uc2UoYXdhaXQgcmVzcG9uc2UuanNvbigpKVxuICAgIH1lbHNle1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgfVxuICB9KSAgXG59XG5leHBvcnQgY29uc3QgcmVnaXN0ZXIgPSAoZGF0YToge3VzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmd9KSA9PntcbiAgcmV0dXJuIGZldGNoKGAke2FwaVVybH0vcmVnaXN0ZXJgLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICB9KS50aGVuKGFzeW5jIChyZXNwb25zZTogUmVzcG9uc2UpPT57XG4gICAgaWYocmVzcG9uc2Uub2spe1xuICAgICAgcmV0dXJuIGhhbmRsZVVzZXJSZXNwb25zZShhd2FpdCByZXNwb25zZS5qc29uKCkpXG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICB9XG4gIH0pXG59XG5cbmV4cG9ydCBjb25zdCBsb2dvdXQgPWFzeW5jICgpID0+e1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0obG9jYWxTdG9yYWdlS2V5KVxuICBcbn0iLCJpbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tIFwicXNcIjtcbmltcG9ydCAqIGFzIGF1dGggZnJvbSAnLi4vYXV0aC1wcm92aWRlcic7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSBcIi4uL2NvbnRleHQvYXV0aC1jb250ZXh0XCI7XG5jb25zdCBhcGlVcmwgPSBwcm9jZXNzLmVudi5SRUFDVF9BUFBfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAxJ1xuXG5pbnRlcmZhY2UgQ29uZmlnICBleHRlbmRzIFJlcXVlc3RJbml0e1xuICB0b2tlbj86IHN0cmluZztcbiAgZGF0YT86IG9iamVjdFxufSBcbmV4cG9ydCBjb25zdCBodHRwID0gYXN5bmMoZW5kcG9pbnQ6IHN0cmluZywge2RhdGEsIHRva2VuLCBoZWFkZXJzLCAuLi5jdXN0b21Db25maWd9OiBDb25maWcgPSB7fSkgPT57XG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdBdXRob3JpemF0aW9uJzogdG9rZW4/IGBCZWFyZXIgJHt0b2tlbn1gOiAnJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgICAvLyDlpoLmnpxtZXRob2Qg5Li6IFBPU1Qg5Lya6KaG55uW5YmN6Z2i55qE6YWN572uXG4gICAgLi4uY3VzdG9tQ29uZmlnIFxuICB9XG4gIC8vIGNvbnNvbGUubG9nKCd0b2tlbicgLCB0b2tlbilcbiAgaWYoY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpID09PSAnR0VUJykge1xuICAgIGVuZHBvaW50ICs9IGA/JHtzdHJpbmdpZnkoZGF0YSl9YFxuICB9ZWxzZXtcbiAgICBjb25maWcuYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEgfHwge30pXG4gIH1cbiAgcmV0dXJuIHdpbmRvdy5mZXRjaChgJHthcGlVcmx9LyR7ZW5kcG9pbnR9YCwgY29uZmlnKS50aGVuKGFzeW5jIHJlc3BvbnNlID0+e1xuICAgIC8vIGNvbnNvbGUubG9nKCdmZXRjaGVkJywgcmVzcG9uc2UpXG4gICAgaWYocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCfmtYvor5XlpLHotKUnKVxuICAgICAgYXdhaXQgYXV0aC5sb2dvdXQoKTsgICBcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7bWVzc2FnZTogJ+ivt+mHjeaWsOeZu+W9lSd9KVxuICAgIH1cbiAgICBjb25zdCBkYXRhICA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhLCByZXNwb25zZS5vaylcbiAgICBpZihyZXNwb25zZT8ub2spIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1lbHNle1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGRhdGEpO1xuICAgIH1cbiAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IHVzZUh0dHAgPSAoKSA9PntcbiAgY29uc3Qge3VzZXJ9ID0gdXNlQXV0aCgpO1xuXG4gIC8vIGNvbnNvbGUubG9nKCfosIPnlKgnKVxuICByZXR1cm4gKC4uLltlbmRwb2ludCwgY29uZmlnXTogUGFyYW1ldGVyczx0eXBlb2YgaHR0cD4pID0+IHtcbiAgIHJldHVybiAgaHR0cChlbmRwb2ludCwgey4uLmNvbmZpZywgdG9rZW46IHVzZXI/LnRva2VuIH0pO1xuICB9XG59XG5cblxuLy/ogZTlkIjnsbvlnotcbmxldCBteUZhdm9yaXRlTnVtYmVyOiBzdHJpbmd8IG51bWJlcjtcblxuXG5cbmxldCByb3NlRmF2b3JpdGVOdW1iZXI6IEZhdm9yaXRlTnVtYmVyO1xuXG4vLyDnsbvlnovliKvlkI3lnKjlvojlpJrmg4XlhrXkuIvlj6/ku6XlkoxpbnRlcmZhY2Ug5LqS5o2iXG4vL1xuXG4vLyDnsbvlnovliKvlkI0gLOi/meenjeaXoOazleiiq2ludGVyZmFjZeabv+aNoiBcbnR5cGUgRmF2b3JpdGVOdW1iZXIgPSBzdHJpbmd8IG51bWJlcjtcblxuXG4vLyB1bnRpbGl0eSB0eXBlIOeahOeUqOazle+8miDnlKjms5vlnovnu5nlroPkvKDlhaXkuIDkuKrlhbbku5bnsbvlnovvvIznhLblkI51dGlsaXR5IHR5cGUg5a+56L+Z5Liq57G75Z6L6L+b6KGM5p+Q56eN5pON5L2cXG50eXBlIHR5cGUgPSBQYXJhbWV0ZXJzPHR5cGVvZiBodHRwPlxuXG5cbnR5cGUgUGVyc29uID0ge1xuICBuYW1lOiBzdHJpbmcsXG4gIGFnZTogbnVtYmVyXG59XG50eXBlIFBlcnNvbjIgPSBPbWl0PE9taXQ8UGVyc29uLCAnYWdlJz4sICduYW1lJz47XG50eXBlIFBlcnNvbjMgPSBPbWl0PFBlcnNvbiwgJ2FnZScgfCAnbmFtZSc+O1xuXG5jb25zdCB4aWFvTWluZzogUGFydGlhbDxQZXJzb24+ID0ge25hbWU6IFwieGlhb21pbmdcIn1cbmNvbnN0IHNoZW5NaVJlbjogUGVyc29uMiA9IHtuYW1lOiBcIjEyM1wifTtcblxuXG5cblxuXG4vLyBQYXJ0aWFs55qE5a6e546wXG5cbi8vIOaEj+S5iSBQZXJzb25LZXlzID0gJ25hbWUnIHwgJ2FnZSdcbnR5cGUgUGVyc29uS2V5cyA9IGtleW9mIFBlcnNvbjsgIFxudHlwZSBQYXJ0aWFsPFQ+ID0ge1xuICBbUCBpbiBrZXlvZiBUXT86IFRbUF07XG4gIC8vIOmBjeWOhiBUIOeahOaJgOacieWxnuaAp++8jOW5tuS4lOaKiuWug+S7rOeahOWAvOi1i+e7meS4gOS4quaWsOeahOWAvFxufVxuXG5cblxuLy8gUGlja+eahOWunueOsFxudHlwZSBQaWNrPFQsIEsgZXh0ZW5kcyBrZXlvZiBUPiA9IHtcbiAgW1AgaW4gS106IFRbUF07XG59XG5cbi8vIEV4Y2x1ZGXnmoTlrp7njrBcbi8vIOWwhlTnmoTmr4/kuKrlsZ7mgKfpgY3ljobvvIzlpoLmnpzkuI3lnKhV5Lit77yM5bCx6L+U5ZueXG50eXBlIEV4Y2x1ZGU8VCwgVT4gPSBUIGV4dGVuZHMgVSA/IG5ldmVyIDogVDtcblxuXG4vLyBFeHRyYWN055qE5a6e546wXG50eXBlIEV4dHJhY3Q8VCwgVT4gPSBUIGV4dGVuZHMgVSA/IFQgOiBuZXZlcjtcblxuLy8gT21pdOeahOWunueOsFxudHlwZSBPbWl0PFQsIEsgZXh0ZW5kcyBrZXlvZiBhbnk+ID0gUGljazxULCBFeGNsdWRlPGtleW9mIFQsIEs+PjtcblxuXG5cbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgY29uc3QgaXNGYWxzeSA9ICh2YWx1ZTogdW5rbm93bikgPT4gdmFsdWUgPT09IDAgPyBmYWxzZSA6ICAhdmFsdWU7XG5leHBvcnQgIGNvbnN0IGlzVm9pZCA9ICh2YWx1ZTogdW5rbm93bikgPT4gdmFsdWU9PT1udWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnO1xuZXhwb3J0IGNvbnN0IGNsZWFuT2JqZWN0ID0gKG9iamVjdDoge1trZXk6IHN0cmluZ106IHVua25vd259KTogYW55ID0+IHtcbiAgY29uc3QgcmVzdWx0ID0geyAuLi5vYmplY3QgfTtcbiAgT2JqZWN0LmtleXMocmVzdWx0KS5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gcmVzdWx0W2tleV07XG4gICAgaWYgKGlzVm9pZCh2YWx1ZSkpIHtcbiAgICAgIGRlbGV0ZSByZXN1bHRba2V5XVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGNvbnN0IHVzZU1vdW50ID0gKGNhbGxiYWNrOiAoKT0+dm9pZCkgPT57XG4gIHVzZUVmZmVjdCgoKT0+e1xuICAgIGNhbGxiYWNrKClcbiAgfSwgW10pXG59XG5cbi8vIGNvbnN0IGRlYm91bmNlID0oZnVuYywgZGVsYXkpID0+e1xuLy8gICBsZXQgdGltZW91dCA9IG51bGw7XG4vLyAgIHJldHVybiBmdW5jdGlvbiguLi5wYXJhbSl7XG4vLyAgICAgaWYodGltZW91dCl7XG4vLyAgICAgICBjbGVhclRpbWVvdXQodGltZW91dClcbi8vICAgICB9XG4vLyAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuLy8gICAgICAgZnVuYyguLi5wYXJhbSlcbi8vICAgICB9LCBkZWxheSk7XG4vLyAgIH1cbi8vIH1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZURlYm91bmNlPFQ+KHZhbHVlOlQsIGRlbGF5PzogbnVtYmVyKTogVCB7XG4gIC8vIOavj+asoeWcqHZhbHVl5Y+Y5YyW5Lul5ZCO77yM6K6+572u5LiA5Liq5a6a5pe25ZmoXG4gIGNvbnN0IFtkZWJvdW5jZWRWYWx1ZSwgc2V0RGVib3VuY2VkVmFsdWVdID0gdXNlU3RhdGUodmFsdWUpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHNldERlYm91bmNlZFZhbHVlKHZhbHVlKSwgZGVsYXkpO1xuICAgIC8vIOavj+asoeWcqOS4iuS4gOS4qnVzZUVmZmVjdOWkhOeQhuWujOS7peWQjuWGjei/kOihjFxuICAgIHJldHVybiAoKT0+e1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpXG4gICAgfVxuICB9LCBbdmFsdWUsIGRlbGF5XSlcbiAgcmV0dXJuIGRlYm91bmNlZFZhbHVlXG59XG5cbmludGVyZmFjZSBQZXJzb24ge1xuICBuYW1lOiBzdHJpbmc7XG4gIGFlZzogbnVtYmVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVzZUFycmF5PFQ+KGFycmF5OiBUW10pIHtcbiAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZShhcnJheSk7XG4gIGZ1bmN0aW9uIGNsZWFyKCl7XG4gICAgc2V0VmFsdWUoW10pXG4gIH07XG4gIGZ1bmN0aW9uIHJlbW92ZUluZGV4KGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBuZXdBcnJheSA9IFsuLi52YWx1ZV07XG4gICAgbmV3QXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBzZXRWYWx1ZShuZXdBcnJheSk7XG4gIH1cbiAgZnVuY3Rpb24gYWRkKGl0ZW06IFQpe1xuICAgIHNldFZhbHVlKFsuLi52YWx1ZSwgaXRlbV0pXG4gIH1cbiAgcmV0dXJuIHt2YWx1ZSwgY2xlYXIsIHJlbW92ZUluZGV4LCBhZGR9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlRG9jdW1lbnRUaXRsZSh0aXRsZTogc3RyaW5nLCBrZWVwT25Vbm1vdW50OiBib29sZWFuICA9IHRydWUpe1xuICAgIGNvbnN0IG9sZFRpdGxlID0gdXNlUmVmPHN0cmluZz4oZG9jdW1lbnQudGl0bGUpLmN1cnJlbnQ7XG5cbiAgICB1c2VFZmZlY3QoKCk9PntcbiAgICAgIGRvY3VtZW50LnRpdGxlID0gdGl0bGU7XG4gICAgfSwgW3RpdGxlXSk7XG5cbiAgICB1c2VFZmZlY3QoKCk9PntcbiAgICAgIHJldHVybiAoKT0+e1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IG9sZFRpdGxlO1xuICAgICAgfVxuICAgIH0sIFtvbGRUaXRsZSxrZWVwT25Vbm1vdW50XSk7XG59XG5cbmV4cG9ydCBjb25zdCB1c2VNb3VudGVkICA9ICgpID0+e1xuICBjb25zdCBtb3VudGVkUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgdXNlRWZmZWN0KCgpPT57XG4gICAgbW91bnRlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICByZXR1cm4gKCk9PntcbiAgICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIH1cbiAgfSwgW10pO1xuICByZXR1cm4gbW91bnRlZFJlZlxufVxuXG5leHBvcnQgY29uc3Qgc3Vic2V0ID0gPFxuICBPIGV4dGVuZHMgeyBba2V5IGluIHN0cmluZ106IHVua25vd24gfSxcbiAgSyBleHRlbmRzIGtleW9mIE9cbj4oXG4gIG9iajogTyxcbiAga2V5czogS1tdXG4pID0+IHtcbiAgY29uc3QgZmlsdGVyZWRFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFtrZXldKSA9PlxuICAgIGtleXMuaW5jbHVkZXMoa2V5IGFzIEspXG4gICk7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoZmlsdGVyZWRFbnRyaWVzKSBhcyBQaWNrPE8sIEs+O1xufTsiLCJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVkdWNlciwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZU1vdW50ZWQgfSBmcm9tIFwiLi9pbmRleFwiO1xuaW50ZXJmYWNlIFN0YXRlPEQ+IHtcbiAgZXJyb3I6IEVycm9yIHwgbnVsbDtcbiAgZGF0YTogRCB8IG51bGw7XG4gIHN0YXQ6IFwiaWRsZVwiIHwgXCJsb2FkaW5nXCIgfCBcImVycm9yXCIgfCBcInN1Y2Nlc3NcIjtcbn1cblxuY29uc3QgZGVmYXVsdEluaXRpYWxTdGF0ZTogU3RhdGU8bnVsbD4gPSB7XG4gIGVycm9yOiBudWxsLFxuICBkYXRhOiBudWxsLFxuICBzdGF0OiBcImlkbGVcIixcbn07XG5cbmNvbnN0IHVzZVNhZmVEaXNwYXRjaCA9IDxUPihkaXNwYXRjaDogKC4uLmFyZ3M6IFRbXSk9PnZvaWQpPT57XG4gIGNvbnN0IG1vdW50ZWRSZWYgPSAgdXNlTW91bnRlZCgpO1xuICByZXR1cm4gdXNlQ2FsbGJhY2soKC4uLmFyZ3M6IFRbXSk9PiAobW91bnRlZFJlZi5jdXJyZW50PyBkaXNwYXRjaCguLi5hcmdzKTogdm9pZCAwKSxbbW91bnRlZFJlZiwgZGlzcGF0Y2hdKVxufVxuXG5leHBvcnQgY29uc3QgdXNlQXN5bmMgPSA8RD4oaW5pdGlhbFN0YXRlPzogU3RhdGU8RD4pID0+IHtcbiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSB1c2VSZWR1Y2VyKFxuICAgIChzdGF0ZTogU3RhdGU8RD4sIGFjdGlvbjogUGFydGlhbDxTdGF0ZTxEPj4pID0+ICh7IC4uLnN0YXRlLCAuLi5hY3Rpb24gfSksXG4gICAgeyAuLi5kZWZhdWx0SW5pdGlhbFN0YXRlLCAuLi5pbml0aWFsU3RhdGUgfVxuICApO1xuICBjb25zdCBbcmV0cnksIHNldFJldHJ5XSA9IHVzZVN0YXRlKCgpID0+ICgpID0+IHt9KTtcbiAgY29uc3Qgc2FmZURpc3BhdGNoID0gdXNlU2FmZURpc3BhdGNoKGRpc3BhdGNoKTtcblxuICBjb25zdCBzZXREYXRhID0gdXNlQ2FsbGJhY2soKGRhdGE6IEQpID0+IHtcbiAgICBzYWZlRGlzcGF0Y2goeyBlcnJvcjogbnVsbCwgZGF0YSwgc3RhdDogXCJzdWNjZXNzXCIgfSk7XG4gIH0sW3NhZmVEaXNwYXRjaF0pO1xuICBjb25zdCBzZXRFcnJvciA9IHVzZUNhbGxiYWNrKChlcnJvcjogRXJyb3IpID0+IHtcbiAgICBzYWZlRGlzcGF0Y2goeyBlcnJvciwgc3RhdDogXCJlcnJvclwiLCBkYXRhOiBudWxsIH0pO1xuICB9LFtzYWZlRGlzcGF0Y2ggXSlcbiAgY29uc3QgcnVuID0gdXNlQ2FsbGJhY2soKFxuICAgIHByb21pc2U6IFByb21pc2U8RD4sXG4gICAgcnVuQ29uZmlnPzogeyByZXRyeTogKCkgPT4gUHJvbWlzZTxEPiB9XG4gICkgPT4ge1xuICAgIC8vIGlmKCEoIHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSl7XG4gICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUFzeW5jOiBwcm9taXNlIG11c3QgYmUgYSBQcm9taXNlJylcbiAgICAvLyB9XG4gICAgaWYgKCFwcm9taXNlIHx8ICFwcm9taXNlLnRoZW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIuivt+S8oOWFpSBQcm9taXNlIOexu+Wei+aVsOaNriBcIik7XG4gICAgfVxuICAgIHNldFJldHJ5KCgpID0+ICgpID0+IHtcbiAgICAgIGlmIChydW5Db25maWc/LnJldHJ5KSB7XG4gICAgICAgIHJ1bihydW5Db25maWc/LnJldHJ5KCksIHJ1bkNvbmZpZyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzYWZlRGlzcGF0Y2goeyBzdGF0OiBcImxvYWRpbmdcIiwgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfSk7XG4gICAgcmV0dXJuIHByb21pc2VcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIHNldERhdGEoZGF0YSk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIHNldEVycm9yKGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH0sW3NldERhdGEsIHNldEVycm9yLCBzYWZlRGlzcGF0Y2hdKVxuICByZXR1cm4ge1xuICAgIGlzSWRsZTogc3RhdGUuc3RhdCA9PT0gXCJpZGxlXCIsXG4gICAgaXNMb2FkaW5nOiBzdGF0ZS5zdGF0ID09PSBcImxvYWRpbmdcIixcbiAgICBpc0Vycm9yOiBzdGF0ZS5zdGF0ID09PSBcImVycm9yXCIsXG4gICAgaXNTdWNjZXNzOiBzdGF0ZS5zdGF0ID09PSBcInN1Y2Nlc3NcIixcbiAgICBydW4sXG4gICAgc2V0RGF0YSxcbiAgICBzZXRFcnJvcixcbiAgICByZXRyeSxcbiAgICAuLi5zdGF0ZSxcbiAgfTtcbn07XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gXCJAZW1vdGlvbi9zdHlsZWRcIjtcbmltcG9ydCB7IEJ1dHRvbiwgU3BpbiwgVHlwb2dyYXBoeSB9IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgeyBEZXZUb29scyB9IGZyb20gXCJqaXJhLWRldi10b29sXCI7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG4vLyBpbXBvcnQgeyBEZXZUb29scyB9IGZyb20gXCJqaXJhLWRldi10b29sXCI7XG4vLyBleHBvcnQgY29uc3QgUm93ID0gc3R5bGVkLmRpdjx7IGdhcD86IG51bWJlciB8IGJvb2xlYW4gfT5gXG4vLyAgIGRpc3BsYXk6IGZsZXg7XG4vLyAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4vLyAgID4gKiB7XG4vLyAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuLy8gICAgIG1hcmdpbi1ib3R0b206IDAgIWltcG9ydGFudDtcbi8vICAgICBtYXJnaW4tcmlnaHQ6ICR7KHByb3BzID0gdHlwZW9mIHByb3BzLmdhcCl9O1xuLy8gICB9XG4vLyBgO1xuZXhwb3J0IGNvbnN0IFJvdyA9IHN0eWxlZC5kaXY8e1xuICBnYXA/OiBudW1iZXIgfCBib29sZWFuO1xuICBiZXR3ZWVuPzogYm9vbGVhbjsgXG4gIG1hcmdpbkJvdHRvbT86IG51bWJlciBcbn0+YFxuZGlzcGxheTogZmxleDtcbmFsaWduLWl0ZW1zOiBjZW50ZXI7XG5qdXN0aWZ5LWNvbnRlbnQ6ICR7KHByb3BzID0+IHByb3BzLmJldHdlZW4/ICdzcGFjZS1iZXR3ZWVuJzogdW5kZWZpbmVkKX07XG4+ICoge1xuICBtYXJnaW4tdG9wOiAwICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1ib3R0b206ICR7KHByb3BzKSA9PiB0eXBlb2YgcHJvcHMubWFyZ2luQm90dG9tID09PSAnbnVtYmVyJz8gcHJvcHMubWFyZ2luQm90dG9tKydyZW0nOiAwfSA7XG4gIG1hcmdpbi1yaWdodDogJHtwcm9wcyA9PiB0eXBlb2YgcHJvcHMuZ2FwID09PSAnbnVtYmVyJyA/IHByb3BzLmdhcCsgJ3JlbSc6ICBwcm9wcy5nYXAgPyAnMnJlbSc6ICcwJ31cbn1gXG5cblxuY29uc3QgRnVsbFBhZ2UgPSBzdHlsZWQuZGl2YFxuICBoZWlnaHQ6IDEwMHZoO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblxuYFxuZXhwb3J0IGNvbnN0IEZ1bGxQYWdlTG9hZGluZyA9ICgpID0+IDxGdWxsUGFnZT5cbiAgPFNwaW4gc2l6ZT17J2xhcmdlJ30vPlxuPC9GdWxsUGFnZT5cblxuXG5leHBvcnQgY29uc3QgRnVsbFBhZ2VFcnJvckZhbGxiYWNrID0gKHtlcnJvcn06IHtlcnJvcjogRXJyb3J8IG51bGx9KT0+IDxGdWxsUGFnZT5cbiAgPEVycm9yQm94IGVycm9yPXtlcnJvcn0+PC9FcnJvckJveD5cbiAgPERldlRvb2xzIC8+XG48L0Z1bGxQYWdlPlxuXG5leHBvcnQgY29uc3QgQnV0dG9uTm9QYWRkaW5nID0gc3R5bGVkKEJ1dHRvbilgXG4gIHBhZGRpbmc6IDBweDtcbmBcbmNvbnN0IGlzRXJyb3IgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEVycm9yID0+IHZhbHVlPy5tZXNzYWdlXG5leHBvcnQgY29uc3QgRXJyb3JCb3ggPSBmdW5jdGlvbih7ZXJyb3J9OiB7ZXJyb3I6IHVua25vd259KXtcbiAgaWYoaXNFcnJvcihlcnJvcikpe1xuICAgIHJldHVybiA8VHlwb2dyYXBoeS5UZXh0IHR5cGU9eydkYW5nZXInfT57ZXJyb3IubWVzc2FnZX08L1R5cG9ncmFwaHkuVGV4dD5cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0ICBjb25zdCBTY3JlZW5Db250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBwYWRkaW5nOiAzLjJyZW07XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBcbmAgIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi90eXBlcy91c2VyXCI7XG5pbXBvcnQgKiBhcyBhdXRoIGZyb20gJy4uL2F1dGgtcHJvdmlkZXInO1xuaW1wb3J0IHsgaHR0cCB9IGZyb20gJy4uL3V0aWxzL2h0dHAnO1xuaW1wb3J0IHsgdXNlTW91bnQgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyB1c2VBc3luYyB9IGZyb20gJy4uL3V0aWxzL3VzZS1hc3luYyc7XG5pbXBvcnQgeyBGdWxsUGFnZUVycm9yRmFsbGJhY2ssIEZ1bGxQYWdlTG9hZGluZyB9IGZyb20gJy4uL2NvbXBvbmVudHMvbGliJztcbmltcG9ydCB7IHVzZVF1ZXJ5Q2xpZW50IH0gZnJvbSAncmVhY3QtcXVlcnknO1xuXG5cbmludGVyZmFjZSBBdXRoRm9ybSB7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG59XG5cbmNvbnN0IGJvb3RzdHJhcFVzZXIgPSBhc3luYyAoKSA9PiB7XG4gIGxldCB1c2VyID0gbnVsbDtcbiAgY29uc3QgdG9rZW4gPSBhdXRoLmdldFRva2VuKCk7XG4gIGlmKHRva2VuKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGh0dHAoJ21lJywge3Rva2VufSk7XG4gICAgdXNlciA9IGRhdGEudXNlcjtcbiAgfVxuICByZXR1cm4gdXNlcjtcbn1cblxuY29uc3QgQXV0aENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PHtcbiAgdXNlcjogVXNlcnwgbnVsbDtcbiAgbG9naW46IChmb3JtIDogQXV0aEZvcm0pID0+IFByb21pc2U8dm9pZD47XG4gIHJlZ2lzdGVyOiAoZm9ybTogQXV0aEZvcm0pID0+IFByb21pc2U8dm9pZD47XG4gIGxvZ291dDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgXG59IHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuQXV0aENvbnRleHQuZGlzcGxheU5hbWUgPSAnQXV0aENvbnRleHQnO1xuXG5leHBvcnQgY29uc3QgQXV0aFByb3ZpZGVyID0gKHtjaGlsZHJlbn06IHtjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlfSkgPT57XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcbiAgY29uc3Qge2lzTG9hZGluZywgaXNFcnJvciwgcnVuLCBpc0lkbGUsIGRhdGE6IHVzZXIsIHNldERhdGE6IHNldFVzZXIsIGVycm9yfSA9IHVzZUFzeW5jPFVzZXIgfCBudWxsPigpXG4gIHVzZU1vdW50KCgpPT57XG4gICAgLy8gYm9vdHN0cmFwVXNlcigpLnRoZW4oc2V0VXNlcilcbiAgICBydW4oYm9vdHN0cmFwVXNlcigpKVxuICB9KVxuICBpZihpc0lkbGUgfHwgaXNMb2FkaW5nKSB7XG4gICAgcmV0dXJuIDxGdWxsUGFnZUxvYWRpbmcvPlxuICB9XG4gIGlmKGlzRXJyb3Ipe1xuICAgIHJldHVybiA8RnVsbFBhZ2VFcnJvckZhbGxiYWNrIGVycm9yPXtlcnJvcn0vPlxuICB9XG5cblxuICBjb25zdCBsb2dpbiA9IChmb3JtOiBBdXRoRm9ybSkgPT4gYXV0aC5sb2dpbihmb3JtKS50aGVuKHVzZXIgPT57XG4gICAgc2V0VXNlcih1c2VyKVxuICB9KTtcbiAgY29uc3QgcmVnaXN0ZXIgPSAoZm9ybTogQXV0aEZvcm0pID0+IGF1dGgucmVnaXN0ZXIoZm9ybSkudGhlbih1c2VyPT4gc2V0VXNlcih1c2VyKSk7XG5cbiAgY29uc3QgbG9nb3V0ID0gKCkgPT4gYXV0aC5sb2dvdXQoKS50aGVuKCgpID0+e1xuICAgIHNldFVzZXIobnVsbCk7XG4gICAgcXVlcnlDbGllbnQuY2xlYXIoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIDxBdXRoQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17e3VzZXIsIGxvZ2luLCByZWdpc3RlciwgbG9nb3V0fX0+XG4gICAge2NoaWxkcmVufVxuICAgIDwvQXV0aENvbnRleHQuUHJvdmlkZXI+XG59XG4gXG5leHBvcnQgZGVmYXVsdCBBdXRoQ29udGV4dDtcblxuXG5leHBvcnQgY29uc3QgdXNlQXV0aCA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoQXV0aENvbnRleHQpO1xuICBpZighY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlQXV0aOW/hemhu+WGjUF1dGhQcm92aWRlciDkuK3kvb/nlKgnKVxuICB9XG4gIHJldHVybiBjb250ZXh0OyAgICBcbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBRdWVyeUNsaWVudCwgUXVlcnlDbGllbnRQcm92aWRlciB9IGZyb20gXCJyZWFjdC1xdWVyeVwiO1xuaW1wb3J0IHsgQXV0aFByb3ZpZGVyIH0gZnJvbSBcIi4vYXV0aC1jb250ZXh0XCI7XG5mdW5jdGlvbiBBcHBQcm92aWRlcnMoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICByZXR1cm4gKFxuICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17bmV3IFF1ZXJ5Q2xpZW50KCl9PlxuICAgICAgPEF1dGhQcm92aWRlcj57Y2hpbGRyZW59PC9BdXRoUHJvdmlkZXI+XG4gICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBBcHBQcm92aWRlcnM7XG4iLCJpbXBvcnQgeyBEZXZUb29scywgbG9hZFNlcnZlcn0gZnJvbSAnamlyYS1kZXYtdG9vbCc7XG4vLyBpbXBvcnQgeyBsb2FkRGV2VG9vbHMgfSBmcm9tICdqaXJhLWRldi10b29sJztcblxuLy8gaW1wb3J0IHsgRGV2VG9vbHMsIGxvYWRTZXJ2ZXIgfSBmcm9tICdqaXJhLWRldi10b29sJ1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSdcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAnXG5pbXBvcnQgQXBwUHJvdmlkZXJzIGZyb20gJy4vY29udGV4dCdcblxuLy8gaW1wb3J0IFwiYW50ZC9kaXN0L2FudGQubGVzc1wiO1xuLy8gaW1wb3J0IHsgRGV2VG9vbHMgfSBmcm9tICdqaXJhLWRldi10b29sJztcbi8vIGltcG9ydCB7IGxvYWRTZXJ2ZXIgfSBmcm9tICdqaXJhLWRldi10b29sJztcblxuXG4vLyBsb2FkRGV2VG9vbHMoKCk9Pntcbi8vICAgICBSZWFjdERPTS5yZW5kZXIoXG4vLyAgICAgPFJlYWN0LlN0cmljdE1vZGU+XG4vLyAgICAgICA8QXBwUHJvdmlkZXJzPlxuLy8gICAgICBcbi8vICAgICAgICAgPEFwcD48L0FwcD5cbi8vICAgICAgIDwvQXBwUHJvdmlkZXJzPlxuLy8gICAgIDwvUmVhY3QuU3RyaWN0TW9kZT4sXG4vLyAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxuLy8gICApXG4vLyB9KVxubG9hZFNlcnZlcigoKSA9PntcbiAgUmVhY3RET00ucmVuZGVyKFxuICAgIDxSZWFjdC5TdHJpY3RNb2RlPlxuICAgICAgPEFwcFByb3ZpZGVycz5cbiAgICAgICAgPERldlRvb2xzLz5cbiAgXG4gICAgICAgIHsvKiA8QXBwPjwvQXBwPiAqL31cbiAgICAgIDwvQXBwUHJvdmlkZXJzPlxuICAgIDwvUmVhY3QuU3RyaWN0TW9kZT4sXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxuICApXG59KVxuIl0sIm5hbWVzIjpbImFwaVVybCIsInN0cmluZ2lmeSIsImF1dGgubG9nb3V0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJ1c2VSZWR1Y2VyIiwidXNlU3RhdGUiLCJzdHlsZWQiLCJhdXRoLmdldFRva2VuIiwibG9naW4iLCJhdXRoLmxvZ2luIiwicmVnaXN0ZXIiLCJhdXRoLnJlZ2lzdGVyIiwibG9nb3V0Il0sIm1hcHBpbmdzIjoid25CQUFBLEtBQU0sR0FBSSxVQUFvQixDQUMxQixLQUFNLEdBQVUsU0FBUyxjQUFjLE1BQU0sRUFBRSxRQUMvQyxHQUFJLEdBQVcsRUFBUSxVQUFZLEVBQVEsU0FBUyxlQUFlLEVBQy9ELE9BRUosU0FBVyxLQUFRLFVBQVMsaUJBQWlCLDJCQUEyQixFQUNwRSxFQUFlLENBQUksRUFFdkIsR0FBSSxrQkFBaUIsQUFBQyxHQUFjLENBQ2hDLFNBQVcsS0FBWSxHQUNuQixHQUFJLEVBQVMsT0FBUyxZQUd0QixTQUFXLEtBQVEsR0FBUyxXQUN4QixBQUFJLEVBQUssVUFBWSxRQUFVLEVBQUssTUFBUSxpQkFDeEMsRUFBZSxDQUFJLENBR3ZDLENBQUssRUFBRSxRQUFRLFNBQVUsQ0FBRSxVQUFXLEdBQU0sUUFBUyxFQUFJLENBQUUsRUFDdkQsV0FBc0IsRUFBUSxDQUMxQixLQUFNLEdBQVksQ0FBQSxFQUNsQixNQUFJLEdBQU8sV0FDUCxHQUFVLFVBQVksRUFBTyxXQUM3QixFQUFPLGdCQUNQLEdBQVUsZUFBaUIsRUFBTyxnQkFDdEMsQUFBSSxFQUFPLGNBQWdCLGtCQUN2QixFQUFVLFlBQWMsVUFDdkIsQUFBSSxFQUFPLGNBQWdCLFlBQzVCLEVBQVUsWUFBYyxPQUV4QixFQUFVLFlBQWMsY0FDckIsQ0FDVixDQUNELFdBQXdCLEVBQU0sQ0FDMUIsR0FBSSxFQUFLLEdBRUwsT0FDSixFQUFLLEdBQUssR0FFVixLQUFNLEdBQVksRUFBYSxDQUFJLEVBQ25DLE1BQU0sRUFBSyxLQUFNLENBQVMsQ0FDN0IsQ0FDTCxFQUFFLEFBQW9CLEVBQUcsRUN0Q3pCLEtBQU0sR0FBa0IsMEJBRVgsRUFBVyxJQUFN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
